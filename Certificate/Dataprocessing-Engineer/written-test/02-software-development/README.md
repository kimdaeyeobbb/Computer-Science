# 반정규화(Denomalization)

### 정의

- DB에서 시스템의 성능 향상이나 개발/운영의 단순화를 위해, 정규화된 엔티티, 속성, 관계에 대해 의도적으로 데이터 중복, 테이블 통합, 테이블 분리 등을 적용하는 과정
- 반정규화를 하는 이유
  - 정규화된 데이터베이스는 데이터 중복을 최소화하고 일관성을 높이지만, 테이블이 너무 잘게 쪼개져서 조회할 때 JOIN이 많아지고 속도가 느려질 수 있다. 이러한 경우, 반정규화를 통해 일부러 중복을 허용하거나 테이블 구조를 단순화하여 조회 성능을 높이고, 자주 쓰는 데이터를 더 빠르게 접근할 수 있도록 한다.

### 중복 테이블의 추가란?

- 중복 테이블 추가는 반정규화의 대표적인 방법 중 하나로, 여러 테이블에서 데이터를 자주 모아서 조회해야 하거나, 특정 범위의 데이터만 자주 처리하는 경우에 필요한 데이터만을 모아 별도의 테이블로 중복 저장하는 방법
- 사례
  - 여러 테이블을 조인해야 얻을 수 있는 결과를 자주 조회할 때
  - 통계, 집계 데이터를 빠르게 제공해야 할 때
  - 서버가 분리되어 원격 조인 비용이 클 때
  - 특정 부분만 자주 사용하는 대용량 테이블에서 일부만 떼어내서 빠르게 조회하고 싶을 때

### 반정규화 유형 중 중복 테이블을 추가하는 방법

- 집계 테이블의 추가
  - 여러 테이블의 데이터를 집계(합계, 평균 등)해서 별도의 테이블에 저장
  - ex) 매일매일의 판매 합계를 미리 저장해두는 '입별 매출 집계 테이블'
  - 원본 데이터가 바뀔 때마다 트리거나 스케줄러로 집계 테이블도 갱신
- 진행 테이블의 추가
  - 이력 관리나 특정 상태의 데이터만 모아두는 테이블
  - Ex) 주문 처리 중인 건만 따로 저장하는 '주문 진행 테이블'
- 특정 부분만을 포함하는 테이블의 추가
  - 대용량 테이블에서 자주 쓰는 일부 컬럼이나 행만 따로 떼어내서 테이블 생성
  - ex) 고객 테이블에서 자주 조회되는 이름, 전화번호만 따로 모은 '고객 요약 테이블'

# 외계인 코드

- 아주 오래되거나 참고문서 또는 개발자가 없어 유지보수 작업이 어려운 프로그램

# 디지털 저작권 관리 (DRM, Digital Rights Management)

### 정의

- 디지털 컨텐츠 (음악, 동영상, 문서, 소프트웨어 등)의 저각권을 보호하기 위해 컨텐츠의 생성, 유통, 이용 전 과정에 걸쳐 저작권자의 의도대로만 사용되도록 통제하고 관리하는 기술 체계

### 기술 요소

- 크랙 방지 기술 (Tamper Resistance)
  - DRM 시스템의 무력화나 우회 시도를 방지하는 기술
- 정책 관리 기술 (Policy Management)
  - 라이선스 발급, 사용 권한, 사용 조건 등 정책을 설정 및 관리
- 암호화 기술 (Encryption)
  - 컨텐츠와 라이선스를 암호화하여 허가된 사용자만 접근 가능하게 함
- 키 관리 기술
  - 암호화에 사용되는 키를 저장/분배하는 기술
- 식별 기술 (Identification)
  - 컨텐츠에 고유 식별 정보를 부여해 추적 및 관리
- 저작권 표현 (Right Expression)
  - 라이선스의 내용을 전자적으로 표현하는 기술

# 트리

### 차수

- 트리의 차수는 가장 차수가 많은 노드의 차수를 뜻함

### 단말 노드

- 자식이 하나도 없는 노드를 뜻함

# 물이데이터 저장소의 파티션 설계

### 정의

- `파티션 설계`란, DB에 저장된 큰 데이터를 여러 개의 작은 단위(파티션)로 나누어 저장하는 방법을 설계하는 것을 말함.
- 이렇게 하면 데이터 관리가 쉬워지고, 성능과 확장성, 가용성이 크게 향상됨

### 파티션을 사용하는 이유

- 성능 향상
  - 필요한 데이터만 빠르게 찾을 수 있어 쿼리 속도가 빨라짐
- 확장성
  - 데이터가 많아져도 파티션을 추가해 쉽게 확장할 수 있음
- 가용성
  - 일부 파티션에 문제가 생겨도 전체 시스템에 영향이 적음
- 관리 효율
  - 파티션별로 백업, 복구, 유지보수가 쉬워짐

### 파티션의 주요 설계 방법

#### 1) 파티션 키 선정

- 데이터를 어떤 기준 (ex. 날짜, 지역, ID 등)으로 나눌지 결정함

#### 2) 파티션의 수 결정

- 데이터 양, 사용 패턴, 시스템 구조에 따라 적절한 파티션 개수를 정함

#### 3) 파티션 유형 선택

- 파티션 방식 중 시스템에 맞는 방식을 고름

### 파티션 유형

#### 1) 범위 분할 (Range Partitioning)

- 특정 컬럼의 값 범위에 따라 여러 파티션으로 나눔

- 예시
  - 날짜별로 2024년, 2025년, 2026년 파틱션
  - 우편번호가 10000~19999, 20000~29999 등 범위별 분할
- 장점
  - 기간별, 숫자대별로 데이터 관리 및 삭제가 쉬움

#### 2) 해시 분할 (Hash Partitioning)

- 해시 함수를 이용해 값을 계산하고, 그 결과로 파티션을 결정함

- 예시

  - 고객 ID를 해시해서 4개의 파티션에 고르게 분산
  - 해시값이 0이면 파티션1, 1이면 파티션2

- 데이터가 자동으로 고르게 분산되어, 특정 파티션에 데이터가 몰리는 현상(핫스팟)을 방지

#### 3) 조합(복합) 분할 (Composite Partitioning)

- 여러 분할 방식을 조합해서 사용

- 예시

  - 먼저 연도별로 범위 분할, 그 안에서 해시 분할
  - 국가별 목록 분할 후, 각 국가에 맞춰 유연하게 설계

- 데이터 특성과 사용 패턴에 맞춰 유연하게 설계

#### 4) 목록 분할 (List Partitioning)

- 특정 컬럼의 정해진 값 집합에 따라 데이터를 나눔

- 예시

  - 국가별로 '한국', '미국', '아르헨티나' 각각 파티션
  - 지역별로 '서울', '부산', '제주' 등 목록별 분할

- 명확한 값 그룹(카테고리)별로 데이터 관리가 쉬움

#### 5) 라운드로빈 분할 (Round-Robin Partitioning)

- 새로 들어오는 데이터를 순서대로(돌려가며) 각 파티션에 나눠 저장함

- 예시

  - 첫번째 데이터는 파티션1, 두번째는 파티션2, 세번째는 파티션3, 네번째는 다시 파티션1,...

- 데이터가 파티션에 거의 균등하게 분배되므로 파티션의 크기가 비슷해져서 부하 분산에 유리함

- 특정 값이나 범위로 조회할 때는 효율이 떨어질 수 있음

#### 6) 수직 분할 (Vertical Partitioning)

- 테이블의 열(컬럼)단위로 분할함

- 예시

  - 자주 쓰는 컬럼만 따로 분리하여 빠르게 접근
  - 덜 쓰는 컬럼은 다른 파티션에 저장

- 특정 컬럼만 자주 조회할 때 성능이 향상됨
